using System;
using System.Drawing;
using System.Drawing.Drawing2D;
using System.Windows.Forms;

namespace WindowFormLastVersion
{
    public class WinnerDialog : Form
    {
        private string winnerName;
        private bool isFinalWinner;
        private string scoreInfo;

public WinnerDialog(string winner, bool isFinal = false, string score = "")
        {
       winnerName = winner;
  isFinalWinner = isFinal;
            scoreInfo = score;
      InitializeComponent();
        }

        private void InitializeComponent()
 {
      this.FormBorderStyle = FormBorderStyle.None;
 this.StartPosition = FormStartPosition.CenterParent;
            this.BackColor = Color.White;
            this.Size = new Size(500, 350);
         this.DoubleBuffered = true;

        // Create rounded form
   GraphicsPath path = new GraphicsPath();
      int radius = 30;
   path.AddArc(0, 0, radius, radius, 180, 90);
     path.AddArc(Width - radius, 0, radius, radius, 270, 90);
            path.AddArc(Width - radius, Height - radius, radius, radius, 0, 90);
            path.AddArc(0, Height - radius, radius, radius, 90, 90);
      path.CloseAllFigures();
        this.Region = new Region(path);

          // Header Panel with gradient
          Panel headerPanel = new Panel
            {
           Size = new Size(500, 100),
   Location = new Point(0, 0),
              BackColor = Color.Transparent
    };
 headerPanel.Paint += (s, e) =>
{
    using (LinearGradientBrush brush = new LinearGradientBrush(
               headerPanel.ClientRectangle,
         Color.FromArgb(41, 128, 185),
          Color.FromArgb(109, 213, 250),
 90f))
        {
  e.Graphics.FillRectangle(brush, headerPanel.ClientRectangle);
    }
            };

  // Trophy/Crown Icon
     Label iconLabel = new Label
            {
                Text = isFinalWinner ? "👑" : "🏆",
                Font = new Font("Segoe UI Emoji", 36, FontStyle.Bold),
                ForeColor = Color.Gold,
           Size = new Size(100, 80),
    Location = new Point(200, 10),
    TextAlign = ContentAlignment.MiddleCenter,
       BackColor = Color.Transparent
            };

            // Title Label
   Label titleLabel = new Label
    {
          Text = isFinalWinner ? "CHAMPION!" : "WINNER!",
      Font = new Font("Times New Roman", 32, FontStyle.Bold),
           ForeColor = Color.White,
          Size = new Size(500, 60),
              Location = new Point(0, 120),
                TextAlign = ContentAlignment.MiddleCenter,
          BackColor = Color.Transparent
          };

      // Winner Name Label
            Label nameLabel = new Label
       {
         Text = winnerName,
     Font = new Font("Times New Roman", 28, FontStyle.Bold),
   ForeColor = Color.FromArgb(41, 128, 185),
  Size = new Size(480, 50),
 Location = new Point(10, 185),
 TextAlign = ContentAlignment.MiddleCenter,
              BackColor = Color.Transparent
          };

            // Score Info Label (if provided)
            Label scoreLabel = null;
       if (!string.IsNullOrEmpty(scoreInfo))
      {
 scoreLabel = new Label
     {
       Text = scoreInfo,
           Font = new Font("Times New Roman", 14, FontStyle.Regular),
            ForeColor = Color.FromArgb(52, 73, 94),
               Size = new Size(480, 30),
       Location = new Point(10, 240),
      TextAlign = ContentAlignment.MiddleCenter,
       BackColor = Color.Transparent
     };
   }

    // OK Button with gradient effect
            Button btnOK = new Button
            {
    Text = "OK",
            Font = new Font("Times New Roman", 16, FontStyle.Bold),
      Size = new Size(150, 50),
     Location = new Point(175, 280),
           ForeColor = Color.White,
   FlatStyle = FlatStyle.Flat,
     Cursor = Cursors.Hand
      };
        btnOK.FlatAppearance.BorderSize = 0;
       btnOK.Paint += (s, e) =>
            {
    using (LinearGradientBrush brush = new LinearGradientBrush(
        btnOK.ClientRectangle,
       Color.FromArgb(46, 204, 113),
 Color.FromArgb(39, 174, 96),
    90f))
      {
          GraphicsPath btnPath = new GraphicsPath();
  int btnRadius = 10;
        btnPath.AddArc(0, 0, btnRadius, btnRadius, 180, 90);
           btnPath.AddArc(btnOK.Width - btnRadius, 0, btnRadius, btnRadius, 270, 90);
       btnPath.AddArc(btnOK.Width - btnRadius, btnOK.Height - btnRadius, btnRadius, btnRadius, 0, 90);
           btnPath.AddArc(0, btnOK.Height - btnRadius, btnRadius, btnRadius, 90, 90);
           btnPath.CloseAllFigures();
      
                e.Graphics.SmoothingMode = SmoothingMode.AntiAlias;
          e.Graphics.FillPath(brush, btnPath);
         
           StringFormat sf = new StringFormat
   {
 Alignment = StringAlignment.Center,
            LineAlignment = StringAlignment.Center
               };
           e.Graphics.DrawString(btnOK.Text, btnOK.Font, Brushes.White, btnOK.ClientRectangle, sf);
          }
            };
         btnOK.Click += (s, e) => { this.DialogResult = DialogResult.OK; this.Close(); };
            btnOK.MouseEnter += (s, e) => { btnOK.Cursor = Cursors.Hand; btnOK.Invalidate(); };
 btnOK.MouseLeave += (s, e) => { btnOK.Cursor = Cursors.Default; btnOK.Invalidate(); };

  // Add shadow effect
            this.Paint += (s, e) =>
            {
             e.Graphics.SmoothingMode = SmoothingMode.AntiAlias;
         using (Pen pen = new Pen(Color.FromArgb(189, 195, 199), 2))
                {
                 GraphicsPath borderPath = new GraphicsPath();
   borderPath.AddArc(1, 1, radius - 2, radius - 2, 180, 90);
             borderPath.AddArc(Width - radius + 1, 1, radius - 2, radius - 2, 270, 90);
        borderPath.AddArc(Width - radius + 1, Height - radius + 1, radius - 2, radius - 2, 0, 90);
    borderPath.AddArc(1, Height - radius + 1, radius - 2, radius - 2, 90, 90);
  borderPath.CloseAllFigures();
    e.Graphics.DrawPath(pen, borderPath);
  }
            };

            // Add controls to form
  this.Controls.Add(headerPanel);
            headerPanel.Controls.Add(iconLabel);
          this.Controls.Add(titleLabel);
  this.Controls.Add(nameLabel);
      if (scoreLabel != null)
      this.Controls.Add(scoreLabel);
            this.Controls.Add(btnOK);

    // Add animation effect
            this.Opacity = 0;
  System.Windows.Forms.Timer fadeIn = new System.Windows.Forms.Timer { Interval = 20 };
  fadeIn.Tick += (s, e) =>
       {
      if (this.Opacity < 1)
        this.Opacity += 0.1;
     else
      fadeIn.Stop();
            };
      fadeIn.Start();
        }
    }
}
