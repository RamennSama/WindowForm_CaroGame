using System;
using System.Windows.Forms;

namespace WindowFormLastVersion
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            this.FormClosing += Form1_FormClosing;
        }

        private void button1_Click(object sender, EventArgs e)
        {
            // Two players mode
            var gameForm = new CaroGameForm(playWithComputer: false);
            gameForm.ShowDialog();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            Text = "Caro Game";
            
            // Customize label1 (CARO GAME)
            label1.BackColor = Color.LightBlue;
            label1.ForeColor = Color.DarkBlue;
            label1.Font = new Font("Arial", 36, FontStyle.Bold);
            
            // Create rounded region for label1
            System.Drawing.Drawing2D.GraphicsPath path1 = new System.Drawing.Drawing2D.GraphicsPath();
            int radius1 = 15;
            Rectangle rect1 = label1.ClientRectangle;
            path1.AddArc(rect1.X, rect1.Y, radius1 * 2, radius1 * 2, 180, 90);
            path1.AddArc(rect1.Width - radius1 * 2, rect1.Y, radius1 * 2, radius1 * 2, 270, 90);
            path1.AddArc(rect1.Width - radius1 * 2, rect1.Height - radius1 * 2, radius1 * 2, radius1 * 2, 0, 90);
            path1.AddArc(rect1.X, rect1.Height - radius1 * 2, radius1 * 2, radius1 * 2, 90, 90);
            path1.CloseFigure();
            label1.Region = new Region(path1);
            
            // Customize label2 (Chọn chức năng)
            label2.BackColor = Color.LightGreen;
            label2.ForeColor = Color.DarkGreen;
            label2.Font = new Font("Arial", 16, FontStyle.Bold);
            
            // Customize buttons
            foreach (Control ctrl in this.Controls)
            {
                if (ctrl is Button btn)
                {
                    btn.BackColor = Color.LightBlue;
                    btn.ForeColor = Color.DarkBlue;
                    btn.Font = new Font("Arial", 12, FontStyle.Bold);
                    btn.FlatStyle = FlatStyle.Flat;
                    btn.FlatAppearance.BorderSize = 0;
                    
                    // Create rounded region for buttons
                    System.Drawing.Drawing2D.GraphicsPath path = new System.Drawing.Drawing2D.GraphicsPath();
                    int radius = 10;
                    Rectangle rect = btn.ClientRectangle;
                    path.AddArc(rect.X, rect.Y, radius * 2, radius * 2, 180, 90);
                    path.AddArc(rect.Width - radius * 2, rect.Y, radius * 2, radius * 2, 270, 90);
                    path.AddArc(rect.Width - radius * 2, rect.Height - radius * 2, radius * 2, radius * 2, 0, 90);
                    path.AddArc(rect.X, rect.Height - radius * 2, radius * 2, radius * 2, 90, 90);
                    path.CloseFigure();
                    btn.Region = new Region(path);
                }
            }
        }

        private void Form1_FormClosing(object sender, FormClosingEventArgs e)
        {
            if (MessageBox.Show("Are you sure you want to exit the application?", "Exit", MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.No)
            {
                e.Cancel = true;
            }
        }

        private void button2_Click(object sender, EventArgs e)
        {
            // Play with computer - show difficulty selection
            using var difficultyForm = new DifficultySelectForm();
            if (difficultyForm.ShowDialog() == DialogResult.OK)
            {
                var gameForm = new CaroGameForm(playWithComputer: true, difficulty: difficultyForm.SelectedDifficulty);
                gameForm.ShowDialog();
            }
        }

        private void button3_Click_1(object sender, EventArgs e)
        {
            if (MessageBox.Show("Are you sure you want to exit the application?", "Exit", MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            {
                Application.Exit();
            }
        }

        private void label1_Click(object sender, EventArgs e)
        {

        }
    }
}
