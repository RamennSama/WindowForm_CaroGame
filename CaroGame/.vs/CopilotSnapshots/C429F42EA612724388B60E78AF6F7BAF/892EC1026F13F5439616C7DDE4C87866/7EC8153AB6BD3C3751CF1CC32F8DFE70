using System;
using System.Drawing;
using System.Windows.Forms;

namespace WindowFormLastVersion
{
    public partial class NameInputDialog : Form
    {
        public string PlayerXName { get; private set; } = "Player X";
        public string PlayerOName { get; private set; } = "Player O";
        public int MaxGames { get; private set; } = 5;

        private TextBox txtPlayerX;
        private TextBox txtPlayerO;
        private NumericUpDown numMaxGames;
        private Button btnOK;
        private Button btnCancel;

        public NameInputDialog()
        {
            InitializeComponent();
        }

        private void InitializeComponent()
        {
            this.Text = "Enter Player Names and Game Settings";
            this.ClientSize = new System.Drawing.Size(400, 230);
            this.FormBorderStyle = FormBorderStyle.FixedDialog;
            this.MaximizeBox = false;
            this.MinimizeBox = false;
            this.StartPosition = FormStartPosition.CenterParent;
            this.BackColor = Color.White;

            // Title with blue background
            var lblTitle = new Label
            {
                Text = "Player Settings",
                Font = new Font("Times New Roman", 16, FontStyle.Bold),
                Location = new Point(0, 15),
                Size = new Size(400, 30),
                TextAlign = ContentAlignment.MiddleCenter,
                BackColor = SystemColors.ActiveCaption,
                ForeColor = Color.White
            };

            // Player settings panel
            var settingsPanel = new Panel
            {
                Location = new Point(0, 55),
                Size = new Size(400, 145),
                BackColor = Color.White
            };

            var lblPlayerX = new Label
            {
                Text = "Player X Name:",
                Font = new Font("Times New Roman", 12),
                Location = new Point(30, 10),
                Size = new Size(120, 25)
            };

            txtPlayerX = new TextBox
            {
                Text = "Player X",
                Font = new Font("Times New Roman", 12),
                Location = new Point(150, 10),
                Size = new Size(200, 25)
            };

            var lblPlayerO = new Label
            {
                Text = "Player O Name:",
                Font = new Font("Times New Roman", 12),
                Location = new Point(30, 45),
                Size = new Size(120, 25)
            };

            txtPlayerO = new TextBox
            {
                Text = "Player O",
                Font = new Font("Times New Roman", 12),
                Location = new Point(150, 45),
                Size = new Size(200, 25)
            };

            var lblMaxGames = new Label
            {
                Text = "Number of Games:",
                Font = new Font("Times New Roman", 12),
                Location = new Point(30, 80),
                Size = new Size(120, 25)
            };

            numMaxGames = new NumericUpDown
            {
                Font = new Font("Times New Roman", 12),
                Location = new Point(150, 80),
                Size = new Size(70, 25),
                Minimum = 1,
                Maximum = 10,
                Value = 5
            };

            btnOK = new Button
            {
                Text = "OK",
                Font = new Font("Times New Roman", 12),
                Location = new Point(150, 115),
                Size = new Size(110, 35),
                BackColor = Color.White,
                ForeColor = Color.Black,
                FlatStyle = FlatStyle.Flat,
                DialogResult = DialogResult.OK
            };
            btnOK.FlatAppearance.BorderSize = 1;
            btnOK.FlatAppearance.BorderColor = SystemColors.ActiveCaption;
            btnOK.Click += BtnOK_Click;

            btnCancel = new Button
            {
                Text = "Cancel",
                Font = new Font("Times New Roman", 12),
                Location = new Point(270, 115),
                Size = new Size(110, 35),
                BackColor = Color.White,
                ForeColor = Color.Black,
                FlatStyle = FlatStyle.Flat,
                DialogResult = DialogResult.Cancel
            };
            btnCancel.FlatAppearance.BorderSize = 1;
            btnCancel.FlatAppearance.BorderColor = SystemColors.ActiveCaption;

            settingsPanel.Controls.AddRange(new Control[] { lblPlayerX, txtPlayerX, lblPlayerO, txtPlayerO, lblMaxGames, numMaxGames, btnOK, btnCancel });

            this.Controls.AddRange(new Control[] { lblTitle, settingsPanel });
            this.AcceptButton = btnOK;
            this.CancelButton = btnCancel;
        }

        private void BtnOK_Click(object sender, EventArgs e)
        {
            PlayerXName = string.IsNullOrWhiteSpace(txtPlayerX.Text) ? "Player X" : txtPlayerX.Text.Trim();
            PlayerOName = string.IsNullOrWhiteSpace(txtPlayerO.Text) ? "Player O" : txtPlayerO.Text.Trim();
            MaxGames = (int)numMaxGames.Value;
        }
    }
}