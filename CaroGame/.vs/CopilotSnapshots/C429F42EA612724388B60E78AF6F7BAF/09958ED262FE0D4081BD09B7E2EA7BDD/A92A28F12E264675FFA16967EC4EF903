using System;
using System.Drawing;
using System.Windows.Forms;

namespace WindowFormLastVersion
{
    public partial class DifficultySelectForm : Form
    {
        public CaroGameForm.GameDifficulty SelectedDifficulty { get; private set; }
        public int MaxGames { get; private set; } = 5;

        private NumericUpDown numMaxGames;
        private Button btnOK;
        private Button btnCancel;
        private Button selectedButton = null;

        public DifficultySelectForm()
        {
            InitializeComponent();
      SetupForm();
 }

        private void InitializeComponent()
     {
  Text = "Game Settings";
        ClientSize = new Size(400, 220);
 StartPosition = FormStartPosition.CenterParent;
            FormBorderStyle = FormBorderStyle.FixedDialog;
     MaximizeBox = false;
          MinimizeBox = false;
            BackColor = Color.White;
        }

        private void SetupForm()
        {
            // Title with blue background like NameInputDialog
         var lblTitle = new Label
            {
                Text = "Select Difficulty",
       Font = new Font("Times New Roman", 16, FontStyle.Bold),
       Location = new Point(0, 15),
          Size = new Size(400, 30),
     TextAlign = ContentAlignment.MiddleCenter,
       BackColor = SystemColors.ActiveCaption,
             ForeColor = Color.White
       };

       var easyButton = new Button
        {
                Text = "Easy",
      Location = new Point(100, 55),
            Size = new Size(200, 30),
      BackColor = SystemColors.ButtonFace,
      Font = new Font("Times New Roman", 12),
    UseVisualStyleBackColor = true
            };
        easyButton.Click += (s, e) => SelectDifficulty(easyButton, CaroGameForm.GameDifficulty.Easy);

       var mediumButton = new Button
  {
        Text = "Medium",
    Location = new Point(100, 90),
       Size = new Size(200, 30),
          BackColor = SystemColors.ButtonFace,
         Font = new Font("Times New Roman", 12),
            UseVisualStyleBackColor = true
            };
  mediumButton.Click += (s, e) => SelectDifficulty(mediumButton, CaroGameForm.GameDifficulty.Medium);

   var hardButton = new Button
 {
        Text = "Hard",
   Location = new Point(100, 125),
    Size = new Size(200, 30),
            BackColor = SystemColors.ButtonFace,
     Font = new Font("Times New Roman", 12),
     UseVisualStyleBackColor = true
        };
      hardButton.Click += (s, e) => SelectDifficulty(hardButton, CaroGameForm.GameDifficulty.Hard);

            // Game settings container panel
  var settingsPanel = new Panel
       {
   Location = new Point(30, 165),
          Size = new Size(340, 40),
           BackColor = Color.White
    };

     // Label for max games with style matching NameInputDialog
            var lblMaxGames = new Label
            {
        Text = "Number of Games:",
          Font = new Font("Times New Roman", 12),
           Location = new Point(0, 8),
         Size = new Size(120, 25),
      BackColor = Color.White
  };

 // Styled NumericUpDown
numMaxGames = new NumericUpDown
            {
    Font = new Font("Times New Roman", 12),
      Location = new Point(125, 5),
           Size = new Size(50, 25),
    Minimum = 1,
    Maximum = 10,
       Value = 5,
BackColor = Color.White
            };

            // OK Button with matching style
          btnOK = new Button
        {
         Text = "OK",
Font = new Font("Times New Roman", 12),
           Location = new Point(190, 5),
      Size = new Size(70, 30),
     BackColor = SystemColors.ActiveCaption,
       FlatStyle = FlatStyle.Flat,
     DialogResult = DialogResult.OK
            };
            btnOK.FlatAppearance.BorderSize = 0;
       btnOK.Click += BtnOK_Click;

            // Cancel Button with matching style
 btnCancel = new Button
        {
         Text = "Cancel",
    Font = new Font("Times New Roman", 12),
Location = new Point(270, 5),
    Size = new Size(70, 30),
           BackColor = SystemColors.ActiveCaption,
   FlatStyle = FlatStyle.Flat,
       DialogResult = DialogResult.Cancel
          };
            btnCancel.FlatAppearance.BorderSize = 0;

  // Add controls to settings panel
            settingsPanel.Controls.AddRange(new Control[] { lblMaxGames, numMaxGames, btnOK, btnCancel });

          // Add all controls to form
   Controls.AddRange(new Control[] { lblTitle, easyButton, mediumButton, hardButton, settingsPanel });
            this.AcceptButton = btnOK;
   this.CancelButton = btnCancel;
        }

        private void SelectDifficulty(Button clickedButton, CaroGameForm.GameDifficulty difficulty)
        {
   if (selectedButton != null)
       {
   selectedButton.BackColor = SystemColors.ButtonFace;
                selectedButton.UseVisualStyleBackColor = true;
            }

         selectedButton = clickedButton;
            selectedButton.BackColor = SystemColors.ActiveCaption;
  selectedButton.UseVisualStyleBackColor = false;

SelectedDifficulty = difficulty;
        }

        private void BtnOK_Click(object sender, EventArgs e)
        {
  if (selectedButton != null)
         {
 MaxGames = (int)numMaxGames.Value;
          DialogResult = DialogResult.OK;
             Close();
          }
 else
      {
        MessageBox.Show("Please select a difficulty level.", "Selection Required", MessageBoxButtons.OK, MessageBoxIcon.Warning);
        }
        }
    }
}