using System;
using System.Drawing;
using System.Windows.Forms;

namespace WindowFormLastVersion
{
    public partial class DifficultySelectForm : Form
    {
        public CaroGameForm.GameDifficulty SelectedDifficulty { get; private set; }
        public int MaxGames { get; private set; } = 5;

        private NumericUpDown numMaxGames;
        private Button btnOK;
        private Button btnCancel;
        private Button selectedButton = null;

        public DifficultySelectForm()
        {
            InitializeComponent();
      SetupForm();
 }

        private void InitializeComponent()
     {
  Text = "Game Settings";
        ClientSize = new Size(440,280);
 StartPosition = FormStartPosition.CenterParent;
            FormBorderStyle = FormBorderStyle.FixedDialog;
     MaximizeBox = false;
          MinimizeBox = false;
            BackColor = Color.White;
        }

        private void SetupForm()
        {
            // Title
            var lblTitle = new Label
            {
       Text = "Player Settings",
         Font = new Font("Times New Roman",20, FontStyle.Bold),
                Location = new Point(0,15),
Size = new Size(440,40),
 TextAlign = ContentAlignment.MiddleCenter,
        BackColor = Color.White,
  ForeColor = Color.Black
        };

            // Label Number of Games
            var lblMaxGames = new Label
            {
                Text = "Number of",
                Font = new Font("Times New Roman",14, FontStyle.Regular),
                Location = new Point(40,80),
                Size = new Size(120,30),
                TextAlign = ContentAlignment.MiddleLeft
            };

            // NumericUpDown
            numMaxGames = new NumericUpDown
            {
          Font = new Font("Times New Roman",14),
    Location = new Point(170,80),
      Size = new Size(220,30),
                Minimum =1,
         Maximum =10,
      Value =5
  };

          // OK Button
            btnOK = new Button
  {
    Text = "OK",
   Font = new Font("Times New Roman",14),
             Size = new Size(120,40),
                Location = new Point(90,140),
                BackColor = Color.White,
 ForeColor = Color.Black,
 FlatStyle = FlatStyle.Flat,
      DialogResult = DialogResult.OK
      };
     btnOK.FlatAppearance.BorderSize =2;
     btnOK.FlatAppearance.BorderColor = Color.SteelBlue;
     btnOK.Click += BtnOK_Click;

            // Cancel Button
            btnCancel = new Button
  {
    Text = "Cancel",
  Font = new Font("Times New Roman",14),
          Size = new Size(120,40),
          Location = new Point(230,140),
          BackColor = Color.White,
 ForeColor = Color.Black,
 FlatStyle = FlatStyle.Flat,
      DialogResult = DialogResult.Cancel
     };
     btnCancel.FlatAppearance.BorderSize =2;
     btnCancel.FlatAppearance.BorderColor = Color.SteelBlue;

     // Add controls to form
     Controls.Clear();
     Controls.Add(lblTitle);
     Controls.Add(lblMaxGames);
     Controls.Add(numMaxGames);
     Controls.Add(btnOK);
     Controls.Add(btnCancel);

    this.AcceptButton = btnOK;
        this.CancelButton = btnCancel;
        }

        private void SelectDifficulty(Button clickedButton, CaroGameForm.GameDifficulty difficulty)
        {
   if (selectedButton != null)
       {
   selectedButton.BackColor = SystemColors.ButtonFace;
                selectedButton.UseVisualStyleBackColor = true;
            }

         selectedButton = clickedButton;
            selectedButton.BackColor = SystemColors.ActiveCaption;
  selectedButton.UseVisualStyleBackColor = false;

SelectedDifficulty = difficulty;
        }

        private void BtnOK_Click(object sender, EventArgs e)
        {
  if (selectedButton != null)
         {
 MaxGames = (int)numMaxGames.Value;
          DialogResult = DialogResult.OK;
             Close();
          }
 else
      {
        MessageBox.Show("Please select a difficulty level.", "Selection Required", MessageBoxButtons.OK, MessageBoxIcon.Warning);
        this.DialogResult = DialogResult.None; // Prevent dialog from closing
 }
        }
    }
}