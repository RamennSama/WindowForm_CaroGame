using System;
using System.Drawing;
using System.Windows.Forms;

namespace WindowFormLastVersion
{
    public partial class DifficultySelectForm : Form
    {
        public CaroGameForm.GameDifficulty SelectedDifficulty { get; private set; }
        public int MaxGames { get; private set; } = 5;

        private NumericUpDown numMaxGames;
        private Button btnOK;
        private Button btnCancel;
        private Button selectedButton = null;

        public DifficultySelectForm()
        {
            InitializeComponent();
      SetupForm();
 }

        private void InitializeComponent()
     {
  Text = "Game Settings";
        ClientSize = new Size(400, 220);
 StartPosition = FormStartPosition.CenterParent;
            FormBorderStyle = FormBorderStyle.FixedDialog;
     MaximizeBox = false;
          MinimizeBox = false;
            BackColor = Color.White;
        }

        private void SetupForm()
        {
            // Title
            var lblTitle = new Label
            {
       Text = "Select Difficulty",
         Font = new Font("Times New Roman", 16, FontStyle.Bold),
                Location = new Point(0, 15),
Size = new Size(400, 30),
 TextAlign = ContentAlignment.MiddleCenter,
        BackColor = SystemColors.ActiveCaption,
  ForeColor = SystemColors.ControlLightLight
        };

      // Difficulty buttons panel
  var btnPanel = new Panel
 {
      Location = new Point(0, 55),
       Size = new Size(400, 110),
    BackColor = Color.White
 };

            var easyButton = new Button
            {
          Text = "Easy",
    Location = new Point(100, 10),
  Size = new Size(200, 30),
 BackColor = SystemColors.ButtonFace,
         Font = new Font("Times New Roman", 12),
         UseVisualStyleBackColor = true
};
            easyButton.Click += (s, e) => SelectDifficulty(easyButton, CaroGameForm.GameDifficulty.Easy);

      var mediumButton = new Button
        {
                Text = "Medium",
        Location = new Point(100, 40),
    Size = new Size(200, 30),
                BackColor = SystemColors.ButtonFace,
         Font = new Font("Times New Roman", 12),
          UseVisualStyleBackColor = true
            };
      mediumButton.Click += (s, e) => SelectDifficulty(mediumButton, CaroGameForm.GameDifficulty.Medium);

 var hardButton = new Button
            {
        Text = "Hard",
                Location = new Point(100, 70),
          Size = new Size(200, 30),
          BackColor = SystemColors.ButtonFace,
              Font = new Font("Times New Roman", 12),
   UseVisualStyleBackColor = true
  };
       hardButton.Click += (s, e) => SelectDifficulty(hardButton, CaroGameForm.GameDifficulty.Hard);

     btnPanel.Controls.AddRange(new Control[] { easyButton, mediumButton, hardButton });

       // Game settings panel
            var settingsPanel = new Panel
            {
     Location = new Point(0, 165),
        Size = new Size(400, 45),
     BackColor = Color.White
            };

    var lblMaxGames = new Label
            {
 Text = "Number of Games:",
          Font = new Font("Times New Roman", 12),
      Location = new Point(100, 10),
        Size = new Size(120, 25),
      TextAlign = ContentAlignment.MiddleLeft,
       BackColor = Color.White
  };

            numMaxGames = new NumericUpDown
            {
          Font = new Font("Times New Roman", 12),
    Location = new Point(220, 10),
      Size = new Size(50, 25),
                Minimum = 1,
         Maximum = 10,
      Value = 5
  };

          btnOK = new Button
  {
    Text = "OK",
   Font = new Font("Times New Roman", 12),
             Location = new Point(280, 8),
 Size = new Size(50, 30),
                BackColor = SystemColors.Control,
     UseVisualStyleBackColor = true,
       DialogResult = DialogResult.OK
      };
     btnOK.Click += BtnOK_Click;

            btnCancel = new Button
  {
    Text = "Cancel",
  Font = new Font("Times New Roman", 12),
    Location = new Point(335, 8),
          Size = new Size(50, 30),
          BackColor = SystemColors.Control,
                UseVisualStyleBackColor = true,
      DialogResult = DialogResult.Cancel
     };

            settingsPanel.Controls.AddRange(new Control[] { lblMaxGames, numMaxGames, btnOK, btnCancel });

    Controls.AddRange(new Control[] { lblTitle, btnPanel, settingsPanel });
            this.AcceptButton = btnOK;
        this.CancelButton = btnCancel;
        }

        private void SelectDifficulty(Button clickedButton, CaroGameForm.GameDifficulty difficulty)
        {
   if (selectedButton != null)
       {
   selectedButton.BackColor = SystemColors.ButtonFace;
                selectedButton.UseVisualStyleBackColor = true;
            }

         selectedButton = clickedButton;
            selectedButton.BackColor = SystemColors.ActiveCaption;
  selectedButton.UseVisualStyleBackColor = false;

SelectedDifficulty = difficulty;
        }

        private void BtnOK_Click(object sender, EventArgs e)
        {
  if (selectedButton != null)
         {
 MaxGames = (int)numMaxGames.Value;
          DialogResult = DialogResult.OK;
             Close();
          }
 else
      {
        MessageBox.Show("Please select a difficulty level.", "Selection Required", MessageBoxButtons.OK, MessageBoxIcon.Warning);
        }
        }
    }
}